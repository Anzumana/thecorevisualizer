<!DOCTYPE html><html><head><style>body:after{content:undefined;display:none}
body{font-family:'Helvetica',sans-serif}
body{background-color:#000;margin:0;padding:0 0 0 20px;color:#fff;text-shadow:#fff 0 0 5px;-webkit-text-shadow:#fff 0 0 5px;-moz-text-shadow:#fff 0 0 5px;-o-text-shadow:#fff 0 0 5px;-ms-text-shadow:#fff 0 0 5px;background-image:url("gray-background.png");background-position:202px 0;}
body .left-strip{background-image:url("teal-left.png");width:202px;height:100%;position:absolute;left:0;top:0;z-index:-10}
.grid{width:100%;height:100%;position:fixed;z-index:-1;background-size:80px;opacity:.1}
.title{font-size:100px;color:#fff;text-shadow:#fff;-webkit-text-shadow:#fff;-moz-text-shadow:#fff;-o-text-shadow:#fff;-ms-text-shadow:#fff;font-family:Helvetica;position:fixed;z-index:-5;right:10px;bottom:10px;opacity:1;font-size:45px;font-weight:lighter;background-image:url("the-core-alpha.png");height:65px;width:300px;padding-top:300px;text-align:center;background-repeat:no-repeat;background-size:300px;}
.title .the{color:#adadad;text-shadow:#adadad 0 0 10px;-webkit-text-shadow:#adadad 0 0 10px;-moz-text-shadow:#adadad 0 0 10px;-o-text-shadow:#adadad 0 0 10px;-ms-text-shadow:#adadad 0 0 10px}
.title .braces{color:#18c6c6;text-shadow:#16b6b6 0 0 10px;-webkit-text-shadow:#16b6b6 0 0 10px;-moz-text-shadow:#16b6b6 0 0 10px;-o-text-shadow:#16b6b6 0 0 10px;-ms-text-shadow:#16b6b6 0 0 10px}
.container{width:920px;padding:10px;margin:auto}
.tutorial-overlay{position:fixed;top:0;left:0;width:100%;height:100%;z-index:499;background-color:rgba(0,0,0,0.7)}
.tutorial{width:700px;height:500px;padding:50px;padding-top:10px;border:4px solid rgba(24,198,198,0.5);overflow:auto;position:absolute;left:50%;top:50%;margin-left:-400px;margin-top:-350px;z-index:500;-webkit-border-radius:25px;-moz-border-radius:25px;border-radius:25px;box-shadow:rgba(24,198,198,0.3) 0 0 10px,inset rgba(24,198,198,0.3) 0 0 10px;-webkit-box-shadow:rgba(24,198,198,0.3) 0 0 10px,inset rgba(24,198,198,0.3) 0 0 10px;-moz-box-shadow:rgba(24,198,198,0.3) 0 0 10px,inset rgba(24,198,198,0.3) 0 0 10px;-o-box-shadow:rgba(24,198,198,0.3) 0 0 10px,inset rgba(24,198,198,0.3) 0 0 10px;-ms-box-shadow:rgba(24,198,198,0.3) 0 0 10px,inset rgba(24,198,198,0.3) 0 0 10px;background-color:rgba(0,0,0,0.7);color:#fff;text-shadow:rgba(255,255,255,0.3) 0 0 5px;-webkit-text-shadow:rgba(255,255,255,0.3) 0 0 5px;-moz-text-shadow:rgba(255,255,255,0.3) 0 0 5px;-o-text-shadow:rgba(255,255,255,0.3) 0 0 5px;-ms-text-shadow:rgba(255,255,255,0.3) 0 0 5px;}
.tutorial a{cursor:pointer;display:inline-block;margin:10px;padding:10px;box-shadow:rgba(255,255,255,0.3) 0 0 10px,inset rgba(255,255,255,0.3) 0 0 10px;-webkit-box-shadow:rgba(255,255,255,0.3) 0 0 10px,inset rgba(255,255,255,0.3) 0 0 10px;-moz-box-shadow:rgba(255,255,255,0.3) 0 0 10px,inset rgba(255,255,255,0.3) 0 0 10px;-o-box-shadow:rgba(255,255,255,0.3) 0 0 10px,inset rgba(255,255,255,0.3) 0 0 10px;-ms-box-shadow:rgba(255,255,255,0.3) 0 0 10px,inset rgba(255,255,255,0.3) 0 0 10px;background-color:transparent;transition:background-color .5s;-webkit-transition:background-color .5s;-moz-transition:background-color .5s;-o-transition:background-color .5s;-ms-transition:background-color .5s;}
.tutorial a:hover{box-shadow:rgba(24,198,198,0.5) 0 0 10px,inset rgba(24,198,198,0.5) 0 0 10px;-webkit-box-shadow:rgba(24,198,198,0.5) 0 0 10px,inset rgba(24,198,198,0.5) 0 0 10px;-moz-box-shadow:rgba(24,198,198,0.5) 0 0 10px,inset rgba(24,198,198,0.5) 0 0 10px;-o-box-shadow:rgba(24,198,198,0.5) 0 0 10px,inset rgba(24,198,198,0.5) 0 0 10px;-ms-box-shadow:rgba(24,198,198,0.5) 0 0 10px,inset rgba(24,198,198,0.5) 0 0 10px}
.tutorial a:active,.tutorial a.selected{background:rgba(24,198,198,0.3);box-shadow:rgba(24,198,198,0.5) 0 0 10px,inset rgba(24,198,198,0.5) 0 0 10px;-webkit-box-shadow:rgba(24,198,198,0.5) 0 0 10px,inset rgba(24,198,198,0.5) 0 0 10px;-moz-box-shadow:rgba(24,198,198,0.5) 0 0 10px,inset rgba(24,198,198,0.5) 0 0 10px;-o-box-shadow:rgba(24,198,198,0.5) 0 0 10px,inset rgba(24,198,198,0.5) 0 0 10px;-ms-box-shadow:rgba(24,198,198,0.5) 0 0 10px,inset rgba(24,198,198,0.5) 0 0 10px}
.footer{width:65%;margin-top:10px;margin:10px;background-color:rgba(24,198,198,0.15);border:4px solid rgba(24,198,198,0.3);box-shadow:rgba(24,198,198,0.5) 0 0 10px;-webkit-box-shadow:rgba(24,198,198,0.5) 0 0 10px;-moz-box-shadow:rgba(24,198,198,0.5) 0 0 10px;-o-box-shadow:rgba(24,198,198,0.5) 0 0 10px;-ms-box-shadow:rgba(24,198,198,0.5) 0 0 10px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;padding:10px;}
.footer a{cursor:pointer;margin-right:20px;text-decoration:none;color:#fff !important;text-shadow:#fff 0 0 20px;-webkit-text-shadow:#fff 0 0 20px;-moz-text-shadow:#fff 0 0 20px;-o-text-shadow:#fff 0 0 20px;-ms-text-shadow:#fff 0 0 20px;}
.footer a:hover{text-shadow:#fff 0 0 5px;-webkit-text-shadow:#fff 0 0 5px;-moz-text-shadow:#fff 0 0 5px;-o-text-shadow:#fff 0 0 5px;-ms-text-shadow:#fff 0 0 5px}
.keyboard{height:400px;overflow:visible;position:relative;}
.keyboard .inner{width:900px;position:relative;transition:left 1s;-webkit-transition:left 1s;-moz-transition:left 1s;-o-transition:left 1s;-ms-transition:left 1s}
.keyboard .hand{transition:opacity 1s,transform 1s,left 1s;-webkit-transition:opacity 1s,transform 1s,left 1s;-moz-transition:opacity 1s,transform 1s,left 1s;-o-transition:opacity 1s,transform 1s,left 1s;-ms-transition:opacity 1s,transform 1s,left 1s;background-image:url("icons/hand.png");position:absolute;z-index:300;background-size:65%;pointer-events:none;background-repeat:no-repeat;animation:pulse-opacity 4s alternate linear infinite;-webkit-animation:pulse-opacity 4s alternate linear infinite;-moz-animation:pulse-opacity 4s alternate linear infinite;-o-animation:pulse-opacity 4s alternate linear infinite;-ms-animation:pulse-opacity 4s alternate linear infinite;width:483px;height:299px}
.keyboard.display-left .inner{left:330px;}
.keyboard.display-left .inner .mouse{left:-260px}
.keyboard.display-left .hand{left:230px;top:123px;transform:scaleX(-1) rotate(-9deg);-webkit-transform:scaleX(-1) rotate(-9deg);-moz-transform:scaleX(-1) rotate(-9deg);-o-transform:scaleX(-1) rotate(-9deg);-ms-transform:scaleX(-1) rotate(-9deg)}
.keyboard.display-right .inner{left:-300px;}
.keyboard.display-right .inner .mouse{left:1000px}
.keyboard.display-right .hand{left:189px;top:123px;transform:rotate(-9deg);-webkit-transform:rotate(-9deg);-moz-transform:rotate(-9deg);-o-transform:rotate(-9deg);-ms-transform:rotate(-9deg)}
.keyboard.display-full .inner{left:0;}
.keyboard.display-full .inner .mouse{opacity:0}
.keyboard.display-full .hand{opacity:0;display:none}
.mouse{-webkit-border-radius:50px;-moz-border-radius:50px;border-radius:50px;border:4px solid rgba(24,198,198,0.5);box-shadow:rgba(24,198,198,0.3) 0 0 10px,inset rgba(24,198,198,0.3) 0 0 10px;-webkit-box-shadow:rgba(24,198,198,0.3) 0 0 10px,inset rgba(24,198,198,0.3) 0 0 10px;-moz-box-shadow:rgba(24,198,198,0.3) 0 0 10px,inset rgba(24,198,198,0.3) 0 0 10px;-o-box-shadow:rgba(24,198,198,0.3) 0 0 10px,inset rgba(24,198,198,0.3) 0 0 10px;-ms-box-shadow:rgba(24,198,198,0.3) 0 0 10px,inset rgba(24,198,198,0.3) 0 0 10px;background-color:transparent;width:150px;height:200px;padding:25px;position:absolute;top:100px;opacity:1;transition:opacity 1s;-webkit-transition:opacity 1s;-moz-transition:opacity 1s;-o-transition:opacity 1s;-ms-transition:opacity 1s;}
.mouse .key-ForwardMouseButton,.mouse .key-BackMouseButton{position:absolute;left:-20px;}
.mouse .key-ForwardMouseButton.key-size-0-5 .map,.mouse .key-BackMouseButton.key-size-0-5 .map{width:60px;overflow:visible;left:-30px}
.mouse .key-ForwardMouseButton{top:60px}
.mouse .key-BackMouseButton{top:140px}
.row{height:60px;float:left;width:100%;}
.row.row-0-5{height:30px}
.key{float:left;position:relative;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;margin:2px;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:2px solid rgba(24,198,198,0.5);box-shadow:rgba(24,198,198,0.3) 0 0 5px,inset rgba(24,198,198,0.3) 0 0 5px;-webkit-box-shadow:rgba(24,198,198,0.3) 0 0 5px,inset rgba(24,198,198,0.3) 0 0 5px;-moz-box-shadow:rgba(24,198,198,0.3) 0 0 5px,inset rgba(24,198,198,0.3) 0 0 5px;-o-box-shadow:rgba(24,198,198,0.3) 0 0 5px,inset rgba(24,198,198,0.3) 0 0 5px;-ms-box-shadow:rgba(24,198,198,0.3) 0 0 5px,inset rgba(24,198,198,0.3) 0 0 5px;background-color:transparent;height:52px;}
.key.key-void{background-color:transparent !important;box-shadow:none !important;-webkit-box-shadow:none !important;-moz-box-shadow:none !important;-o-box-shadow:none !important;-ms-box-shadow:none !important;border-color:transparent !important}
.key .overlay{position:absolute;top:-4px;left:-4px;opacity:0;z-index:200;height:52px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;transition:opacity .3s,top .3s,left .3s;-webkit-transition:opacity .3s,top .3s,left .3s;-moz-transition:opacity .3s,top .3s,left .3s;-o-transition:opacity .3s,top .3s,left .3s;-ms-transition:opacity .3s,top .3s,left .3s;}
.key .overlay.black{background-color:rgba(255,255,255,0.5);box-shadow:rgba(255,255,255,0.3) 0 0 15px,inset rgba(255,255,255,0.3) 0 0 15px;-webkit-box-shadow:rgba(255,255,255,0.3) 0 0 15px,inset rgba(255,255,255,0.3) 0 0 15px;-moz-box-shadow:rgba(255,255,255,0.3) 0 0 15px,inset rgba(255,255,255,0.3) 0 0 15px;-o-box-shadow:rgba(255,255,255,0.3) 0 0 15px,inset rgba(255,255,255,0.3) 0 0 15px;-ms-box-shadow:rgba(255,255,255,0.3) 0 0 15px,inset rgba(255,255,255,0.3) 0 0 15px}
.key .overlay.white{background-color:rgba(24,198,198,0.5);box-shadow:rgba(24,198,198,0.5) 0 0 15px,inset rgba(24,198,198,0.5) 0 0 15px;-webkit-box-shadow:rgba(24,198,198,0.5) 0 0 15px,inset rgba(24,198,198,0.5) 0 0 15px;-moz-box-shadow:rgba(24,198,198,0.5) 0 0 15px,inset rgba(24,198,198,0.5) 0 0 15px;-o-box-shadow:rgba(24,198,198,0.5) 0 0 15px,inset rgba(24,198,198,0.5) 0 0 15px;-ms-box-shadow:rgba(24,198,198,0.5) 0 0 15px,inset rgba(24,198,198,0.5) 0 0 15px}
.key:hover .overlay.white{opacity:1}
.key.selected .overlay.black{top:0;left:0;opacity:1}
.key.selected .overlay.white{top:0;left:0;opacity:0}
.key.selected .cap,.key.selected .maps{top:0;left:0}
.key.key-Control,.key.key-Shift,.key.key-Alt{animation:pulse-background 3s alternate linear infinite;-webkit-animation:pulse-background 3s alternate linear infinite;-moz-animation:pulse-background 3s alternate linear infinite;-o-animation:pulse-background 3s alternate linear infinite;-ms-animation:pulse-background 3s alternate linear infinite;}
.key.key-Control:hover,.key.key-Shift:hover,.key.key-Alt:hover,.key.key-Control:active,.key.key-Shift:active,.key.key-Alt:active,.key.key-Control.selected,.key.key-Shift.selected,.key.key-Alt.selected{animation:none;-webkit-animation:none;-moz-animation:none;-o-animation:none;-ms-animation:none}
.key.key-size-0-5{width:22px;}
.key.key-size-0-5 .map{width:22px}
.key.key-size-0-5 .overlay{width:22px}
.key.key-size-1{width:52px;}
.key.key-size-1 .map{width:52px}
.key.key-size-1 .overlay{width:52px}
.key.key-size-1-5{width:82px;}
.key.key-size-1-5 .map{width:82px}
.key.key-size-1-5 .overlay{width:82px}
.key.key-size-1-75{width:97px;}
.key.key-size-1-75 .map{width:97px}
.key.key-size-1-75 .overlay{width:97px}
.key.key-size-2{width:112px;}
.key.key-size-2 .map{width:112px}
.key.key-size-2 .overlay{width:112px}
.key.key-size-2-25{width:127px;}
.key.key-size-2-25 .map{width:127px}
.key.key-size-2-25 .overlay{width:127px}
.key.key-size-2-5{width:142px;}
.key.key-size-2-5 .map{width:142px}
.key.key-size-2-5 .overlay{width:142px}
.key.key-size-2-75{width:157px;}
.key.key-size-2-75 .map{width:157px}
.key.key-size-2-75 .overlay{width:157px}
.key.key-size-6{width:352px;}
.key.key-size-6 .map{width:352px}
.key.key-size-6 .overlay{width:352px}
.key .cap{margin-top:15px;text-align:center;text-shadow:#000 0 0 1px;-webkit-text-shadow:#000 0 0 1px;-moz-text-shadow:#000 0 0 1px;-o-text-shadow:#000 0 0 1px;-ms-text-shadow:#000 0 0 1px;font-weight:bold}
.key .maps{position:absolute;top:-4px;left:-4px;transition:top .3s,left .3s;-webkit-transition:top .3s,left .3s;-moz-transition:top .3s,left .3s;-o-transition:top .3s,left .3s;-ms-transition:top .3s,left .3s}
.key .map{overflow:hidden;max-height:56px;margin-top:2px;font-size:12px;position:absolute;top:0;left:0;}
.key .map.map-command{z-index:1;background-color:rgba(255,255,255,0.6);box-shadow:#18c6c6 0 0 15px,inset #18c6c6 0 0 7px;-webkit-box-shadow:#18c6c6 0 0 15px,inset #18c6c6 0 0 7px;-moz-box-shadow:#18c6c6 0 0 15px,inset #18c6c6 0 0 7px;-o-box-shadow:#18c6c6 0 0 15px,inset #18c6c6 0 0 7px;-ms-box-shadow:#18c6c6 0 0 15px,inset #18c6c6 0 0 7px;text-shadow:#000 0 0 1px;-webkit-text-shadow:#000 0 0 1px;-moz-text-shadow:#000 0 0 1px;-o-text-shadow:#000 0 0 1px;-ms-text-shadow:#000 0 0 1px}
.key .map.map-global{z-index:10;background-color:rgba(24,198,198,0.3);box-shadow:#18c6c6 0 0 7px,inset #18c6c6 0 0 7px;-webkit-box-shadow:#18c6c6 0 0 7px,inset #18c6c6 0 0 7px;-moz-box-shadow:#18c6c6 0 0 7px,inset #18c6c6 0 0 7px;-o-box-shadow:#18c6c6 0 0 7px,inset #18c6c6 0 0 7px;-ms-box-shadow:#18c6c6 0 0 7px,inset #18c6c6 0 0 7px;color:#fff;text-shadow:#fff 0 0 1px;-webkit-text-shadow:#fff 0 0 1px;-moz-text-shadow:#fff 0 0 1px;-o-text-shadow:#fff 0 0 1px;-ms-text-shadow:#fff 0 0 1px}
.key .map.cmd-icon-style{background-color:black;background-size:contain;background-repeat:no-repeat;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;height:52px;margin-top:0;text-indent:-9999px;z-index:100}
.key .map.map-inherit{background-image:url("icons/inherit.png");background-size:contain;background-repeat:no-repeat;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;height:52px;margin-top:0;text-indent:-9999px;z-index:100}
.key .map.command-ControlGroupRecall,.key .map.command-ControlGroupAppend,.key .map.command-ControlGroupAssign,.key .map.command-CameraSave,.key .map.command-CameraView{text-align:center;font-size:20px;}
.key .map.command-ControlGroupRecall:before,.key .map.command-ControlGroupAppend:before,.key .map.command-ControlGroupAssign:before,.key .map.command-CameraSave:before,.key .map.command-CameraView:before,.key .map.command-ControlGroupRecall:after,.key .map.command-ControlGroupAppend:after,.key .map.command-ControlGroupAssign:after,.key .map.command-CameraSave:after,.key .map.command-CameraView:after{font-size:15px;display:block;overflow:hidden;max-height:56px;margin-top:2px;font-size:12px}
.key .map.command-ControlGroupRecall.unit-icon,.key .map.command-ControlGroupAppend.unit-icon,.key .map.command-ControlGroupAssign.unit-icon,.key .map.command-CameraSave.unit-icon,.key .map.command-CameraView.unit-icon{text-indent:0}
.key .map.command-ControlGroupRecall,.key .map.command-ControlGroupAppend,.key .map.command-ControlGroupAssign{background-color:rgba(144,238,144,0.3);box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-webkit-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-moz-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-o-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-ms-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;}
.key .map.command-ControlGroupRecall:before,.key .map.command-ControlGroupAppend:before,.key .map.command-ControlGroupAssign:before{content:'Group'}
.key .map.command-CameraSave,.key .map.command-CameraView{background-color:rgba(173,216,230,0.3);box-shadow:#add8e6 0 0 7px,inset #add8e6 0 0 7px;-webkit-box-shadow:#add8e6 0 0 7px,inset #add8e6 0 0 7px;-moz-box-shadow:#add8e6 0 0 7px,inset #add8e6 0 0 7px;-o-box-shadow:#add8e6 0 0 7px,inset #add8e6 0 0 7px;-ms-box-shadow:#add8e6 0 0 7px,inset #add8e6 0 0 7px;}
.key .map.command-CameraSave:before,.key .map.command-CameraView:before{content:'Camera'}
.key .map.command-CameraSave:after{content:'SET';background-color:rgba(144,238,144,0.3);box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-webkit-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-moz-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-o-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-ms-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px}
.key .map.command-ControlGroupRecall{background-color:rgba(144,238,144,0.3);box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-webkit-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-moz-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-o-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-ms-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;}
.key .map.command-ControlGroupRecall:after{background-colorbackground-color:rgba(144,238,144,0.3);box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-webkit-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-moz-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-o-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px;-ms-box-shadow:#90ee90 0 0 7px,inset #90ee90 0 0 7px}
.key .map.command-ControlGroupAppend:after{content:'ADD';background-color:rgba(173,216,230,0.3);box-shadow:#add8e6 0 0 7px,inset #add8e6 0 0 7px;-webkit-box-shadow:#add8e6 0 0 7px,inset #add8e6 0 0 7px;-moz-box-shadow:#add8e6 0 0 7px,inset #add8e6 0 0 7px;-o-box-shadow:#add8e6 0 0 7px,inset #add8e6 0 0 7px;-ms-box-shadow:#add8e6 0 0 7px,inset #add8e6 0 0 7px}
.key .map.command-ControlGroupAssign:after{content:'SET';background-color:rgba(255,192,203,0.3);box-shadow:#ffc0cb 0 0 7px,inset #ffc0cb 0 0 7px;-webkit-box-shadow:#ffc0cb 0 0 7px,inset #ffc0cb 0 0 7px;-moz-box-shadow:#ffc0cb 0 0 7px,inset #ffc0cb 0 0 7px;-o-box-shadow:#ffc0cb 0 0 7px,inset #ffc0cb 0 0 7px;-ms-box-shadow:#ffc0cb 0 0 7px,inset #ffc0cb 0 0 7px}
.settings-bar{height:60px;}
.settings-bar .setting{float:right;}
.settings-bar .setting select,.settings-bar .setting label{display:block}
.unit-icon{float:left;margin:2px;margin-bottom:10px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:50px;height:50px;background-size:50px 50px;background-repeat:no-repeat;text-indent:-9999px;cursor:pointer;position:relative;transition:width .5s,height .5s,background-size .5s,top .5s,margin-bottom .5s;-webkit-transition:width .5s,height .5s,background-size .5s,top .5s,margin-bottom .5s;-moz-transition:width .5s,height .5s,background-size .5s,top .5s,margin-bottom .5s;-o-transition:width .5s,height .5s,background-size .5s,top .5s,margin-bottom .5s;-ms-transition:width .5s,height .5s,background-size .5s,top .5s,margin-bottom .5s;}
.unit-icon.selected,.unit-icon:hover{width:65px;height:65px;background-size:65px 65px;margin-bottom:0}
.unit-icon.selected,.unit-icon.selected:hover{top:-15px}
.unit-icon:hover{top:-7.5px;transition:width .2s,height .2s,background-size .2s,top .2s,margin-bottom .2s;-webkit-transition:width .2s,height .2s,background-size .2s,top .2s,margin-bottom .2s;-moz-transition:width .2s,height .2s,background-size .2s,top .2s,margin-bottom .2s;-o-transition:width .2s,height .2s,background-size .2s,top .2s,margin-bottom .2s;-ms-transition:width .2s,height .2s,background-size .2s,top .2s,margin-bottom .2s}
.races-commands{display:block;position:relative;height:225px}
.race-commands{position:absolute;top:0;left:0;width:1100px;transition:opacity 1s;-webkit-transition:opacity 1s;-moz-transition:opacity 1s;-o-transition:opacity 1s;-ms-transition:opacity 1s;opacity:1;z-index:10;}
.race-commands.hide{opacity:0;z-index:0}
.race-commands .unit-commands{float:left;clear:both}
.race-commands.race-Protoss .unit-icon{box-shadow:#e6e240 0 0 7px,inset #e6e240 0 0 7px;-webkit-box-shadow:#e6e240 0 0 7px,inset #e6e240 0 0 7px;-moz-box-shadow:#e6e240 0 0 7px,inset #e6e240 0 0 7px;-o-box-shadow:#e6e240 0 0 7px,inset #e6e240 0 0 7px;-ms-box-shadow:#e6e240 0 0 7px,inset #e6e240 0 0 7px}
.race-commands.race-Terran .unit-icon{box-shadow:#c61818 0 0 7px,inset #c61818 0 0 7px;-webkit-box-shadow:#c61818 0 0 7px,inset #c61818 0 0 7px;-moz-box-shadow:#c61818 0 0 7px,inset #c61818 0 0 7px;-o-box-shadow:#c61818 0 0 7px,inset #c61818 0 0 7px;-ms-box-shadow:#c61818 0 0 7px,inset #c61818 0 0 7px}
.race-commands.race-Zerg .unit-icon{box-shadow:#8218c6 0 0 7px,inset #8218c6 0 0 7px;-webkit-box-shadow:#8218c6 0 0 7px,inset #8218c6 0 0 7px;-moz-box-shadow:#8218c6 0 0 7px,inset #8218c6 0 0 7px;-o-box-shadow:#8218c6 0 0 7px,inset #8218c6 0 0 7px;-ms-box-shadow:#8218c6 0 0 7px,inset #8218c6 0 0 7px}
.race-commands .unit-commands{margin-top:10px;padding:5px;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;}
.race-commands .unit-commands h3{margin:0;color:#000}
.race-commands.race-Protoss .unit-commands{background-color:rgba(230,226,64,0.15);border:4px solid rgba(230,226,64,0.3);box-shadow:rgba(230,226,64,0.5) 0 0 10px;-webkit-box-shadow:rgba(230,226,64,0.5) 0 0 10px;-moz-box-shadow:rgba(230,226,64,0.5) 0 0 10px;-o-box-shadow:rgba(230,226,64,0.5) 0 0 10px;-ms-box-shadow:rgba(230,226,64,0.5) 0 0 10px}
.race-commands.race-Protoss h3{color:rgba(230,226,64,0.5);text-shadow:rgba(230,226,64,0.3) 0 0 5px;-webkit-text-shadow:rgba(230,226,64,0.3) 0 0 5px;-moz-text-shadow:rgba(230,226,64,0.3) 0 0 5px;-o-text-shadow:rgba(230,226,64,0.3) 0 0 5px;-ms-text-shadow:rgba(230,226,64,0.3) 0 0 5px}
.race-commands.race-Terran .unit-commands{background-color:rgba(198,24,24,0.15);border:4px solid rgba(198,24,24,0.3);box-shadow:rgba(198,24,24,0.5) 0 0 10px;-webkit-box-shadow:rgba(198,24,24,0.5) 0 0 10px;-moz-box-shadow:rgba(198,24,24,0.5) 0 0 10px;-o-box-shadow:rgba(198,24,24,0.5) 0 0 10px;-ms-box-shadow:rgba(198,24,24,0.5) 0 0 10px}
.race-commands.race-Terran h3{color:rgba(198,24,24,0.5);text-shadow:rgba(198,24,24,0.3) 0 0 5px;-webkit-text-shadow:rgba(198,24,24,0.3) 0 0 5px;-moz-text-shadow:rgba(198,24,24,0.3) 0 0 5px;-o-text-shadow:rgba(198,24,24,0.3) 0 0 5px;-ms-text-shadow:rgba(198,24,24,0.3) 0 0 5px}
.race-commands.race-Zerg .unit-commands{background-color:rgba(130,24,198,0.15);border:4px solid rgba(130,24,198,0.3);box-shadow:rgba(130,24,198,0.5) 0 0 10px;-webkit-box-shadow:rgba(130,24,198,0.5) 0 0 10px;-moz-box-shadow:rgba(130,24,198,0.5) 0 0 10px;-o-box-shadow:rgba(130,24,198,0.5) 0 0 10px;-ms-box-shadow:rgba(130,24,198,0.5) 0 0 10px}
.race-commands.race-Zerg h3{color:rgba(130,24,198,0.5);text-shadow:rgba(130,24,198,0.3) 0 0 5px;-webkit-text-shadow:rgba(130,24,198,0.3) 0 0 5px;-moz-text-shadow:rgba(130,24,198,0.3) 0 0 5px;-o-text-shadow:rgba(130,24,198,0.3) 0 0 5px;-ms-text-shadow:rgba(130,24,198,0.3) 0 0 5px}
.races-icons{margin-top:-60px;margin-bottom:5px;height:75px;display:block;}
.races-icons h3{float:left;color:rgba(255,255,255,0.7);text-shadow:rgba(255,255,255,0.7) 0 0 1px;-webkit-text-shadow:rgba(255,255,255,0.7) 0 0 1px;-moz-text-shadow:rgba(255,255,255,0.7) 0 0 1px;-o-text-shadow:rgba(255,255,255,0.7) 0 0 1px;-ms-text-shadow:rgba(255,255,255,0.7) 0 0 1px;font-weight:normal}
.races-icons .race-icon{transition:background-color .5s,border-color .5s;-webkit-transition:background-color .5s,border-color .5s;-moz-transition:background-color .5s,border-color .5s;-o-transition:background-color .5s,border-color .5s;-ms-transition:background-color .5s,border-color .5s;width:75px;height:75px;float:left;border-width:4px;border-style:solid;border-color:transparent;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;cursor:pointer;text-indent:-9999px;background-repeat:no-repeat;background-size:contain;background-color:transparent;}
.races-icons .race-icon.race-Protoss:hover,.races-icons .race-icon.race-Protoss.selected{border:4px solid rgba(230,226,64,0.3);box-shadow:rgba(230,226,64,0.5) 0 0 10px,inset rgba(230,226,64,0.5) 0 0 10px;-webkit-box-shadow:rgba(230,226,64,0.5) 0 0 10px,inset rgba(230,226,64,0.5) 0 0 10px;-moz-box-shadow:rgba(230,226,64,0.5) 0 0 10px,inset rgba(230,226,64,0.5) 0 0 10px;-o-box-shadow:rgba(230,226,64,0.5) 0 0 10px,inset rgba(230,226,64,0.5) 0 0 10px;-ms-box-shadow:rgba(230,226,64,0.5) 0 0 10px,inset rgba(230,226,64,0.5) 0 0 10px}
.races-icons .race-icon.race-Protoss.selected{background-color:rgba(230,226,64,0.15)}
.races-icons .race-icon.race-Terran:hover,.races-icons .race-icon.race-Terran.selected{border:4px solid rgba(198,24,24,0.3);box-shadow:rgba(198,24,24,0.5) 0 0 10px,inset rgba(198,24,24,0.5) 0 0 10px;-webkit-box-shadow:rgba(198,24,24,0.5) 0 0 10px,inset rgba(198,24,24,0.5) 0 0 10px;-moz-box-shadow:rgba(198,24,24,0.5) 0 0 10px,inset rgba(198,24,24,0.5) 0 0 10px;-o-box-shadow:rgba(198,24,24,0.5) 0 0 10px,inset rgba(198,24,24,0.5) 0 0 10px;-ms-box-shadow:rgba(198,24,24,0.5) 0 0 10px,inset rgba(198,24,24,0.5) 0 0 10px}
.races-icons .race-icon.race-Terran.selected{background-color:rgba(198,24,24,0.15)}
.races-icons .race-icon.race-Zerg:hover,.races-icons .race-icon.race-Zerg.selected{border:4px solid rgba(130,24,198,0.3);box-shadow:rgba(130,24,198,0.5) 0 0 10px,inset rgba(130,24,198,0.5) 0 0 10px;-webkit-box-shadow:rgba(130,24,198,0.5) 0 0 10px,inset rgba(130,24,198,0.5) 0 0 10px;-moz-box-shadow:rgba(130,24,198,0.5) 0 0 10px,inset rgba(130,24,198,0.5) 0 0 10px;-o-box-shadow:rgba(130,24,198,0.5) 0 0 10px,inset rgba(130,24,198,0.5) 0 0 10px;-ms-box-shadow:rgba(130,24,198,0.5) 0 0 10px,inset rgba(130,24,198,0.5) 0 0 10px}
.races-icons .race-icon.race-Zerg.selected{background-color:rgba(130,24,198,0.15)}
.races-icons .race-icon.race-Protoss{background-image:url("icons/Protoss.png")}
.races-icons .race-icon.race-Terran{background-image:url("icons/Terran.png")}
.races-icons .race-icon.race-Zerg{background-image:url("icons/Zerg.png")}
.messages{position:absolute;top:20px;right:20px;text-align:right;color:#fff;text-shadow:rgba(255,255,255,0.3) 0 0 10px;-webkit-text-shadow:rgba(255,255,255,0.3) 0 0 10px;-moz-text-shadow:rgba(255,255,255,0.3) 0 0 10px;-o-text-shadow:rgba(255,255,255,0.3) 0 0 10px;-ms-text-shadow:rgba(255,255,255,0.3) 0 0 10px;z-index:400;width:400px;height:400px;pointer-events:none;}
.messages h3{transition:top 3s,height 3s;-webkit-transition:top 3s,height 3s;-moz-transition:top 3s,height 3s;-o-transition:top 3s,height 3s;-ms-transition:top 3s,height 3s;height:40px;margin:0;padding:0;position:relative}
.messages h3.hide{top:-200px;height:0}
@-moz-keyframes pulse-background{0%{background-color:rgba(27,224,224,0.05)}
100%{background-color:rgba(22,178,178,0.3)}
}@-webkit-keyframes pulse-background{0%{background-color:rgba(27,224,224,0.05)}
100%{background-color:rgba(22,178,178,0.3)}
}@-o-keyframes pulse-background{0%{background-color:rgba(27,224,224,0.05)}
100%{background-color:rgba(22,178,178,0.3)}
}@-ms-keyframes pulse-background{0%{background-color:rgba(27,224,224,0.05)}
100%{background-color:rgba(22,178,178,0.3)}
}@keyframes pulse-background{0%{background-color:rgba(27,224,224,0.05)}
100%{background-color:rgba(22,178,178,0.3)}
}@-moz-keyframes pulse-opacity{0%{opacity:0}
100%{opacity:.1}
}@-webkit-keyframes pulse-opacity{0%{opacity:0}
100%{opacity:.1}
}@-o-keyframes pulse-opacity{0%{opacity:0}
100%{opacity:.1}
}@-ms-keyframes pulse-opacity{0%{opacity:0}
100%{opacity:.1}
}@keyframes pulse-opacity{0%{opacity:0}
100%{opacity:.1}
}</style><script src="lib/zepto.min.js"></script><script src="lib/zepto.cookie.min.js"></script><script src="lib/coffeecup.js"></script><script>// Google AnalyticsX
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-40271514-1', 'github.io');
ga('send', 'pageview');</script></head><body><div class="grid"></div><div class="left-strip"></div><div class="title"><span class="braces">{&nbsp;&nbsp;</span><span class="the">The</span><span class="core">Core</span><span class="braces">&nbsp;&nbsp;}</span></div><div class="messages"></div><div class="container"></div><div class="tutorial-overlay"></div><div class="tutorial"><img src="logo-strip.png" /><h1 style="text-align:center">Interactive Demo</h1><p> The Core is a highly-optimized alternative hotkey layout for StarCraft 2.
Instead of looking at a list of keys, use this tool to put your hands on the keyboard and see what does what.</p><h3>The Tilt</h3><img src="tilt.jpg" /><p>The Core is designed to be used with your off-hand on the side of your keyboard closest to your mouse, with a tilted keyboard to keep your wrist straight.</p><img src="pull-keys.jpg" /><p>You'll need to press Shift, Ctrl and Shift-Ctrl a lot, so you may want to remove the keys between Alt and Ctrl.</p><a class="select-chameleon">If you're on a laptop or can't tilt your keyboard, try The Chameleon instead.</a><h3>There are left- and right-handed variants, and layouts for each race as well as a generic Random layout.</h3><p>Are you right- or left-handed?</p><a class="select-hand hand-Right">Right-Handed</a><a class="select-hand hand-Left">Left-Handed</a><p>What is your main class? (Every layout is designed to allow off-racing. If you play all three equally, choose Random.)</p><a class="select-race race-zerg">Zerg</a><a class="select-race race-terran">Terran</a><a class="select-race race-protoss">Protoss</a><a class="select-race race-random">Random</a><p>(Don't worry, this is easy to change later.)</p><script>var __slice = Array.prototype.slice;var __hasProp = Object.prototype.hasOwnProperty;var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };var __extends = function(child, parent) {  for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; }  function ctor() { this.constructor = child; }  ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype;  return child; };var __indexOf = Array.prototype.indexOf || function(item) {  for (var i = 0, l = this.length; i < l; i++) {    if (this[i] === item) return i;  } return -1; };(function () {
        var TheCore, each, kind, ones, parts, race, races, side, sides, size, sizes, _i, _len, _ref;
        window.TheCore = TheCore = {
          version: 'Beta',
          layoutCodeToDisplayName: function(code) {
            return "The Core " + code + " " + this.version + " (" + this.layoutRaces[code[0]] + " " + this.layoutSides[code[1]] + "-Handed  " + this.layoutSizes[code[2]] + ")";
          },
          layoutCodeToFileName: function(code) {
            return "TheCore " + code + " " + this.version + ".SC2Hotkeys";
          }
        };
        parts = {
          layoutRaces: 'Protoss Zerg Terran Random'.split(' '),
          layoutSides: 'Right Left'.split(' '),
          layoutSizes: 'Large Medium Small'.split(' ')
        };
        for (kind in parts) {
          ones = parts[kind];
          TheCore[kind] = {};
          for (_i = 0, _len = ones.length; _i < _len; _i++) {
            each = ones[_i];
            TheCore[kind][each[0]] = each;
          }
        }
        _ref = (function() {
          var _ref, _results;
          _ref = [TheCore.layoutRaces, TheCore.layoutSides, TheCore.layoutSizes];
          _results = [];
          for (k in _ref) {
            v = _ref[k];
            _results.push(v);
          }
          return _results;
        })(), races = _ref[0], sides = _ref[1], sizes = _ref[2];
        TheCore.layoutCodes = $.map((function() {
          var _results;
          _results = [];
          for (side in sides) {
            _results.push((function() {
              var _results1;
              _results1 = [];
              for (race in races) {
                _results1.push((function() {
                  var _results2;
                  _results2 = [];
                  for (size in sizes) {
                    _results2.push("" + race + side + size);
                  }
                  return _results2;
                })());
              }
              return _results1;
            })());
          }
          return _results;
        })(), function(a) {
          return $.map(a, function(n) {
            return n;
          });
        });
        return $(function() {
          var dismiss, hand, layoutSize;
          hand = race = null;
          layoutSize = 'medium';
          dismiss = function() {
            var c, code;
            c = function(s) {
              return s[0].toUpperCase();
            };
            code = "" + (c(race)) + (c(hand)) + (c(layoutSize));
            $('select.hotkey-file').val(TheCore.layoutCodeToDisplayName(code)).change();
            return $('.tutorial-overlay').click();
          };
          $('.select-chameleon').click(function() {
            $('select.hotkey-file').val("The Chameleon").change();
            return $('.tutorial-overlay').click();
          });
          $('.select-hand').click(function() {
            hand = this.className.match(/hand-(\w+)/)[1];
            $('.tutorial .select-hand').removeClass('selected');
            $(this).addClass('selected');
            if (race != null) {
              return dismiss();
            }
          });
          return $('.select-race').click(function() {
            var _ref1;
            race = (_ref1 = this.className.match(/race-(\w+)/)) != null ? _ref1[1] : void 0;
            $('.tutorial .select-race').removeClass('selected');
            $(this).addClass('selected');
            if (hand != null) {
              return dismiss();
            }
          });
        });
      }).call(this);</script></div><div class="footer"><a class="show-tutorial">Show Tutorial</a><a href="https://github.com/cushman/thecorevisualizer" target="blank">About</a><script>var __slice = Array.prototype.slice;var __hasProp = Object.prototype.hasOwnProperty;var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };var __extends = function(child, parent) {  for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; }  function ctor() { this.constructor = child; }  ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype;  return child; };var __indexOf = Array.prototype.indexOf || function(item) {  for (var i = 0, l = this.length; i < l; i++) {    if (this[i] === item) return i;  } return -1; };(function () {
        return $('.footer .show-tutorial').on('click', function() {
          return $('.tutorial,.tutorial-overlay').show();
        });
      }).call(this);</script></div><script>window.containerTemplate = function () {
    div('.keyboard', function() {
      div('.hand', function() {});
      return div('.inner', function() {});
    });
    div('.settings-bar', function() {
      div('.setting', function() {
        label('Keyboard Layout:');
        return select('.keyboard-layout', function() {
          var first, keyboard, _results;
          first = true;
          _results = [];
          for (keyboard in keyboards) {
            _results.push(option({
              value: keyboard,
              selected: first && (first = false)
            }, function() {
              return keyboard;
            }));
          }
          return _results;
        });
      });
      div('.setting', function() {
        label('Hotkeys:');
        return select('.hotkey-file', function() {
          var first, name, _results;
          first = true;
          _results = [];
          for (name in TheCore.currentHotkeysFiles) {
            _results.push(option({
              value: name,
              selected: first && (first = false)
            }, function() {
              return name;
            }));
          }
          return _results;
        });
      });
      return div('.setting', function() {
        label('Display:');
        return select('.display-side', function() {
          var first, side, value, _ref, _results;
          first = true;
          _ref = {
            right: 'Right Side',
            left: 'Left Side',
            full: 'Full Keyboard'
          };
          _results = [];
          for (value in _ref) {
            side = _ref[value];
            _results.push(option({
              value: value,
              selected: first && (first = false)
            }, function() {
              return side;
            }));
          }
          return _results;
        });
      });
    });
    div('.races-icons', function() {
      var race;
      for (race in TheCore.raceCards) {
        div(".race-icon.race-" + (raceClass(race)), function() {
          return race;
        });
      }
      return h3('Select a unit or building to see commands');
    });
    return div('.races-commands', function() {
      var kinds, race, _ref, _results;
      _ref = TheCore.raceCards;
      _results = [];
      for (race in _ref) {
        kinds = _ref[race];
        _results.push(div(".race-commands.race-" + (raceClass(race)), function() {
          var kind, units, _results1;
          _results1 = [];
          for (kind in kinds) {
            units = kinds[kind];
            _results1.push(div(".unit-commands.kind-" + kind, function() {
              var unit, unitName, _results2;
              h3(function() {
                return "" + race + " " + kind;
              });
              _results2 = [];
              for (unitName in units) {
                unit = units[unitName];
                _results2.push(div(".unit-icon.unit-" + unitName, {'style':"background-image:url('icons/"+unit.icon+"');"}, function() {
                  return unit.displayText || unitName;
                }));
              }
              return _results2;
            }));
          }
          return _results1;
        }));
      }
      return _results;
    });
  };</script><script>window.keyboards = {"USQwerty":[{"ESC":"ESC","_0":"_0","F1":"F1","F2":"F2","F3":"F3","F4":"F4","_1":0.5,"F5":"F5","F6":"F6","F7":"F7","F8":"F8","_2":0.5,"F9":"F9","F10":"F10","F11":"F11","F12":"F12"},{},{"`":"`","1 ":"1 ","2 ":"2 ","3 ":"3 ","4 ":"4 ","5 ":"5 ","6 ":"6 ","7 ":"7 ","8 ":"8 ","9 ":"9 ","0 ":"0 ","-":"-","=":"=","BACKSPACE":2},{"TAB":1.5,"Q":"Q","W":"W","E":"E","R":"R","T":"T","Y":"Y","U":"U","I":"I","O":"O","P":"P","[":"[","]":"]","\\":1.5},{"CAPS":1.75,"A":"A","S":"S","D":"D","F":"F","G":"G","H":"H","J":"J","K":"K","L":"L",";":";","'":"'","ENTER":2.25},{"SHIFT L":2.25,"Z":"Z","X":"X","C":"C","V":"V","B":"B","N":"N","M":"M",",":",",".":".","/":"/","SHIFT R":2.75},{"CTRL L":1.5,"WIN L":"WIN L","ALT L":1.5,"SPACE":6,"ALT R":1.5,"WIN R":"WIN R","MENU":"MENU","CTRL R":1.5}],"USDvorak":[{"ESC":"ESC","_0":"_0","F1":"F1","F2":"F2","F3":"F3","F4":"F4","_1":0.5,"F5":"F5","F6":"F6","F7":"F7","F8":"F8","_2":0.5,"F9":"F9","F10":"F10","F11":"F11","F12":"F12"},{},{"`":"`","1 ":"1 ","2 ":"2 ","3 ":"3 ","4 ":"4 ","5 ":"5 ","6 ":"6 ","7 ":"7 ","8 ":"8 ","9 ":"9 ","0 ":"0 ","[":"[","]":"]","BACKSPACE":2},{"TAB":1.5,"'":"'",",":",",".":".","P":"P","Y":"Y","F":"F","G":"G","C":"C","R":"R","L":"L","/":"/","=":"=","\\":1.5},{"CAPS":1.75,"A":"A","O":"O","E":"E","U":"U","I":"I","D":"D","H":"H","T":"T","N":"N","S":"S","-":"-","ENTER":2.25},{"SHIFT L":2.25,";":";","Q":"Q","J":"J","K":"K","X":"X","B":"B","M":"M","W":"W","V":"V","Z":"Z","SHIFT R":2.75},{"CTRL L":1.5,"WIN L":"WIN L","ALT L":1.5,"SPACE":6,"ALT R":1.5,"WIN R":"WIN R","MENU":"MENU","CTRL R":1.5}],"FrenchAzerty":[{"ESC":"ESC","_0":"_0","F1":"F1","F2":"F2","F3":"F3","F4":"F4","_1":0.5,"F5":"F5","F6":"F6","F7":"F7","F8":"F8","_2":0.5,"F9":"F9","F10":"F10","F11":"F11","F12":"F12"},{},{"<":"<","1 ":"1 ","2 ":"2 ","3 ":"3 ","4 ":"4 ","5 ":"5 ","6 ":"6 ","7 ":"7 ","8 ":"8 ","9 ":"9 ","0 ":"0 ","-":"-","=":"=","BACKSPACE":2},{"TAB":1.5,"A":"A","Z":"Z","E":"E","R":"R","T":"T","Y":"Y","U":"U","I":"I","O":"O","P":"P","[":"[","]":"]","\\":1.5},{"CAPS":1.75,"Q":"Q","S":"S","D":"D","F":"F","G":"G","H":"H","J":"J","K":"K","L":"L","M":"M","`":"`","ENTER":2.25},{"SHIFT L":2.25,"W":"W","X":"X","C":"C","V":"V","B":"B","N":"N",",":",",";":";",":":":","=":"=","SHIFT R":2.75},{"CTRL L":1.5,"WIN L":"WIN L","ALT L":1.5,"SPACE":6,"ALT R":1.5,"WIN R":"WIN R","MENU":"MENU","CTRL R":1.5}],"German":[{"ESC":"ESC","_0":"_0","F1":"F1","F2":"F2","F3":"F3","F4":"F4","_1":0.5,"F5":"F5","F6":"F6","F7":"F7","F8":"F8","_2":0.5,"F9":"F9","F10":"F10","F11":"F11","F12":"F12"},{},{"<":"<","1 ":"1 ","2 ":"2 ","3 ":"3 ","4 ":"4 ","5 ":"5 ","6 ":"6 ","7 ":"7 ","8 ":"8 ","9 ":"9 ","0 ":"0 ","ß":"ß","´":"´","BACKSPACE":2},{"TAB":1.5,"Q":"Q","W":"W","E":"E","R":"R","T":"T","Z":"Z","U":"U","I":"I","O":"O","P":"P","ü":"ü","+":"+","\\":1.5},{"CAPS":1.75,"A":"A","S":"S","D":"D","F":"F","G":"G","H":"H","J":"J","K":"K","L":"L","ö":"ö","ä":"ä","ENTER":2.25},{"SHIFT L":2.25,"Y":"Y","X":"X","C":"C","V":"V","B":"B","N":"N","M":"M",",":",",".":".","-":"-","SHIFT R":2.75},{"CTRL L":1.5,"WIN L":"WIN L","ALT L":1.5,"SPACE":6,"ALT R":1.5,"WIN R":"WIN R","MENU":"MENU","CTRL R":1.5}],"USColemak":[{"ESC":"ESC","_0":"_0","F1":"F1","F2":"F2","F3":"F3","F4":"F4","_1":0.5,"F5":"F5","F6":"F6","F7":"F7","F8":"F8","_2":0.5,"F9":"F9","F10":"F10","F11":"F11","F12":"F12"},{},{"`":"`","1 ":"1 ","2 ":"2 ","3 ":"3 ","4 ":"4 ","5 ":"5 ","6 ":"6 ","7 ":"7 ","8 ":"8 ","9 ":"9 ","0 ":"0 ","-":"-","=":"=","BACKSPACE":2},{"TAB":1.5,"Q":"Q","W":"W","F":"F","P":"P","G":"G","J":"J","L":"L","U":"U","Y":"Y",";":";","[":"[","]":"]","\\":1.5},{"CAPS":1.75,"A":"A","R":"R","S":"S","T":"T","D":"D","H":"H","N":"N","E":"E","I":"I","O":"O","'":"'","ENTER":2.25},{"SHIFT L":2.25,"Z":"Z","X":"X","C":"C","V":"V","B":"B","K":"K","M":"M",",":",",".":".","/":"/","SHIFT R":2.75},{"CTRL L":1.5,"WIN L":"WIN L","ALT L":1.5,"SPACE":6,"ALT R":1.5,"WIN R":"WIN R","MENU":"MENU","CTRL R":1.5}]};</script><script>window.keyCodeMaps = {"USQwerty":{"9":"TAB","13":"ENTER","16":"SHIFT","17":"CTRL","18":"ALT","27":"ESC","32":"SPACE","46":"BACKSPACE","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","59":";","65":"a","66":"b","67":"c","68":"d","69":"e","70":"f","71":"g","72":"h","73":"i","74":"j","75":"k","76":"l","77":"m","78":"n","79":"o","80":"p","81":"q","82":"r","83":"s","84":"t","85":"u","86":"v","87":"w","88":"x","89":"y","90":"z","112":"F1","113":"F2","114":"F3","115":"F4","116":"F5","117":"F6","118":"F7","119":"F8","120":"F9","121":"F10","122":"F11","123":"F12","186":";","187":"=","188":",","189":"-","190":".","191":"/","192":"`","219":"[","220":"\\","221":"]","222":"'"},"USDvorak":{"9":"TAB","13":"ENTER","16":"SHIFT","17":"CTRL","18":"ALT","27":"ESC","32":"SPACE","46":"BACKSPACE","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","59":";","65":"a","66":"b","67":"c","68":"d","69":"e","70":"f","71":"g","72":"h","73":"i","74":"j","75":"k","76":"l","77":"m","78":"n","79":"o","80":"p","81":"q","82":"r","83":"s","84":"t","85":"u","86":"v","87":"w","88":"x","89":"y","90":"z","112":"F1","113":"F2","114":"F3","115":"F4","116":"F5","117":"F6","118":"F7","119":"F8","120":"F9","121":"F10","122":"F11","123":"F12","186":";","187":"=","188":",","189":"-","190":".","191":"/","192":"`","219":"[","220":"\\","221":"]","222":"'"},"FrenchAzerty":{"9":"TAB","13":"ENTER","16":"SHIFT","17":"CTRL","18":"ALT","27":"ESC","32":"SPACE","46":"BACKSPACE","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","59":";","65":"a","66":"b","67":"c","68":"d","69":"e","70":"f","71":"g","72":"h","73":"i","74":"j","75":"k","76":"l","77":"m","78":"n","79":"o","80":"p","81":"q","82":"r","83":"s","84":"t","85":"u","86":"v","87":"w","88":"x","89":"y","90":"z","112":"F1","113":"F2","114":"F3","115":"F4","116":"F5","117":"F6","118":"F7","119":"F8","120":"F9","121":"F10","122":"F11","123":"F12","186":";","187":"=","188":",","189":"-","190":".","191":"/","192":"`","219":"[","220":"\\","221":"]","222":"'"},"German":{"9":"TAB","13":"ENTER","16":"SHIFT","17":"CTRL","18":"ALT","27":"ESC","32":"SPACE","46":"BACKSPACE","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","59":";","65":"a","66":"b","67":"c","68":"d","69":"e","70":"f","71":"g","72":"h","73":"i","74":"j","75":"k","76":"l","77":"m","78":"n","79":"o","80":"p","81":"q","82":"r","83":"s","84":"t","85":"u","86":"v","87":"w","88":"x","89":"y","90":"z","112":"F1","113":"F2","114":"F3","115":"F4","116":"F5","117":"F6","118":"F7","119":"F8","120":"F9","121":"F10","122":"F11","123":"F12","186":";","187":"=","188":",","189":"-","190":".","191":"/","192":"`","219":"[","220":"\\","221":"]","222":"'"},"USColemak":{"9":"TAB","13":"ENTER","16":"SHIFT","17":"CTRL","18":"ALT","27":"ESC","32":"SPACE","46":"BACKSPACE","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","59":";","65":"a","66":"b","67":"c","68":"d","69":"e","70":"f","71":"g","72":"h","73":"i","74":"j","75":"k","76":"l","77":"m","78":"n","79":"o","80":"p","81":"q","82":"r","83":"s","84":"t","85":"u","86":"v","87":"w","88":"x","89":"y","90":"z","112":"F1","113":"F2","114":"F3","115":"F4","116":"F5","117":"F6","118":"F7","119":"F8","120":"F9","121":"F10","122":"F11","123":"F12","186":";","187":"=","188":",","189":"-","190":".","191":"/","192":"`","219":"[","220":"\\","221":"]","222":"'"}};</script><script>window.keyboardTemplate = function (keyboard) {
    var row, _i, _len, _results;
    keyboard || (keyboard = this.keyboard);
    text;
    div('.mouse', function() {
      var button, size, which, _ref, _results;
      button = function(which, size) {
        return div("." + (which.toLowerCase()) + "-button.key.key-size-" + (sizeClass(size)) + ".key-" + which + "MouseButton", function() {
          div('.overlay.black', touch);
          div('.overlay.white', function() {
            return div('.cap', function() {});
          });
          return div('.maps', function() {});
        });
      };
      _ref = {
        Left: 1,
        Middle: 0.5,
        Right: 1,
        Forward: 0.5,
        Back: 0.5
      };
      _results = [];
      for (which in _ref) {
        size = _ref[which];
        _results.push(button(which, size));
      }
      return _results;
    });
    _results = [];
    for (_i = 0, _len = keyboard.length; _i < _len; _i++) {
      row = keyboard[_i];
      _results.push(div(".row." + (blankRow(row) ? 'row-0-5' : void 0), function() {
        var key, size, _results1;
        _results1 = [];
        for (key in row) {
          size = row[key];
          if (typeof size === 'string') {
            size = 1;
          }
          _results1.push(div(".key.key-" + (keyClass(key)) + ".key-size-" + (sizeClass(size)), function() {
            div('.overlay.black', touch);
            div('.overlay.white', function() {
              return div('.cap', function() {
                return formatKeyCap(key);
              });
            });
            return div('.maps', function() {});
          }));
        }
        return _results1;
      }));
    }
    return _results;
  };</script><script>window.touch = function () {
  return text('&nbsp;');
};</script><script>window.blankRow = function (row) {
    return Object.keys(row).length === 0;
  };</script><script>window.formatKeyCap = function (key) {
    if (voidKey(key)) {
      return '&nbsp;';
    }
    return key.split(' ')[0];
  };</script><script>window.sizeClass = function (size) {
  return size.toString().replace(/\./, '-');
};</script><script>window.raceClass = function (raceName) {
  return raceName;
};</script><script>window.keyClassMap = {"'":"Apostrophe",";":"SemiColon","/":"Slash",",":"Comma","`":"Grave","]":"BracketClose","[":"BracketOpen","CAPS":"CapsLock","CTRL":"Control","SHIFT":"Shift","ALT":"Alt","ENTER":"Enter","WIN":"Windows","MENU":"Menu","SPACE":"Space",".":"Period","-":"Minus","=":"Equals","\\":"Backslash","TAB":"Tab","ESC":"Escape"};</script><script>window.voidKey = function (key) {
    return key && key.match(/_\d+/);
  };</script><script>window.keyClass = function (key) {
  if (voidKey(key)) {
    return 'void';
  } else {
    return keyClassMap[(key || '').split(' ')[0]] || (key || '').trim();
  }
};</script><script>window.commandDisplayMap = {"HellionTank":"Hellbat"};</script><script>window.commandDisplayName = function (command) {
  var m;
  if (m = command.match(/(ControlGroup|Camera)\w+(\d)/)) {
    return m[2];
  } else {
    return commandDisplayMap[command] || command.replace(/([a-z])([A-Z])/g, "$1 $2");
  }
};</script><script>window.commandClassMap = {};</script><script>window.commandClass = function (command) {
  var m;
  if (m = command.match(/((ControlGroup|Camera)\w+)\d/)) {
    return m[1];
  } else {
    return commandClassMap[command] || command;
  }
};</script><script>window.loadHotkeys = function (keyText) {
  var line, m, map, _i, _len, _ref;
  map = {};
  _ref = keyText.split('\n');
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    line = _ref[_i];
    if (!(m = line.match(/([\w\/]+)=([\w\+,]+)/))) {
      continue;
    }
    map[m[1]] = m[2].split(',');
  }
  return map;
};</script>
<script>
$.getJSON('raceCards.json', function(data) {
	console.log("Got raceCards");
	TheCore.raceCards = data;
});

$.getJSON('commandCards.json', function(data) {
	console.log("Got commandCards");
	TheCore.commandCards = data;
});
</script><script>var __slice = Array.prototype.slice;var __hasProp = Object.prototype.hasOwnProperty;var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };var __extends = function(child, parent) {  for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; }  function ctor() { this.constructor = child; }  ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype;  return child; };var __indexOf = Array.prototype.indexOf || function(item) {  for (var i = 0, l = this.length; i < l; i++) {    if (this[i] === item) return i;  } return -1; };(function () {
      return window.nextTick = function(cb) {
        return setTimeout(cb, 0);
      };
    }).call(this);</script><script>var __slice = Array.prototype.slice;var __hasProp = Object.prototype.hasOwnProperty;var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };var __extends = function(child, parent) {  for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; }  function ctor() { this.constructor = child; }  ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype;  return child; };var __indexOf = Array.prototype.indexOf || function(item) {  for (var i = 0, l = this.length; i < l; i++) {    if (this[i] === item) return i;  } return -1; };(function () {
      var val, _ref;
      TheCore.hotkeysForKeyboard = {};
      TheCore.loadTheCoreForKeyboard = function(keyboard, cb) {
        var code, hotkeysFiles, loadHotkeysFile, n, path, prefix, _i, _len, _ref;
        n = null;
        TheCore.currentKeyboard = keyboard;
        if ((TheCore.currentHotkeysFiles = TheCore.hotkeysForKeyboard[keyboard])) {
          nextTick(renderContainer);
          return;
        }
        hotkeysFiles = TheCore.currentHotkeysFiles = TheCore.hotkeysForKeyboard[keyboard] = {};
        loadHotkeysFile = function(name, path) {
          hotkeysFiles[name] = null;
          n += 1;
          return $.get(path, function(file) {
            hotkeysFiles[name] = file;
            console.log('loaded hotkey file', name, path, file.length);
            if (!(n -= 1)) {
              return renderContainer();
            }
          });
        };
        n = 0;
        prefix = "hotkeys/" + (keyboard === 'USQwerty' ? '' : keyboard + '/');
        _ref = TheCore.layoutCodes;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          code = _ref[_i];
          path = "" + prefix + (TheCore.layoutCodeToFileName(code));
          loadHotkeysFile(TheCore.layoutCodeToDisplayName(code), path);
        }
        if (keyboard === 'USQwerty') {
          loadHotkeysFile("The Chameleon", 'others/Chameleon 2.0.SC2Hotkeys');
          return loadHotkeysFile("HotS Standard", 'others/Standard.SC2Hotkeys');
        }
      };
      TheCore.currentKeyboard = (_ref = (val = $.fn.cookie('keyboard-layout-val')), __indexOf.call("USQwerty USDvorak FrenchAzerty German USColemak".split(' '), _ref) >= 0) ? val : 'USQwerty';
      console.log('Loading keyboard', TheCore.currentKeyboard);
      return TheCore.loadTheCoreForKeyboard(TheCore.currentKeyboard);
    }).call(this);</script><script>var __slice = Array.prototype.slice;var __hasProp = Object.prototype.hasOwnProperty;var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };var __extends = function(child, parent) {  for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; }  function ctor() { this.constructor = child; }  ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype;  return child; };var __indexOf = Array.prototype.indexOf || function(item) {  for (var i = 0, l = this.length; i < l; i++) {    if (this[i] === item) return i;  } return -1; };(function () {
      return String.prototype.trim = function() {
        return this.replace(/(^\s+|\s+$)/g, '');
      };
    }).call(this);</script><script>var __slice = Array.prototype.slice;var __hasProp = Object.prototype.hasOwnProperty;var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };var __extends = function(child, parent) {  for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; }  function ctor() { this.constructor = child; }  ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype;  return child; };var __indexOf = Array.prototype.indexOf || function(item) {  for (var i = 0, l = this.length; i < l; i++) {    if (this[i] === item) return i;  } return -1; };(function () {
      window.scanHotkeys = function() {
        var cname, code, details, kind, kinds, out, race, unit, unitName, units, _ref, _ref1;
        out = "";
        _ref = TheCore.raceCards;
        for (race in _ref) {
          kinds = _ref[race];
          for (kind in kinds) {
            units = kinds[kind];
            for (unitName in units) {
              unit = units[unitName];
              _ref1 = unit.commands;
              for (cname in _ref1) {
                details = _ref1[cname];
                code = details.hotkeyCode || cname;
                if (code.match(/\//)) {
                  if (!TheCore.currentHotkeys[code]) {
                    if (TheCore.currentHotkeys[code.split('/')[0]]) {
                      console.log("" + (code.split('/')[0]) + " should be " + code, {
                        it: TheCore.currentHotkeys[code.split('/')[0]]
                      });
                      out += "" + code + "=" + (TheCore.currentHotkeys[code.split('/')[0]].join(',')) + "\n";
                    }
                  }
                }
              }
            }
          }
        }
        return console.log('additions', out);
      };
      return window.renderContainer = function() {
        var Unit, attr, clearMaps, currentGroup, currentHotkeys, currentKeyboard, currentMods, currentUnit, debounceTimer, globalState, highlightModKeys, hotkeysFile, hotkeysFiles, i, key, keyPress, keyRelease, modKeyAttrs, modKeys, mouseButtons, selectedUnit, sendMessage, showCurrentUnitMaps, showGlobalMaps, showMapsForUnit, val, which, windowHandler;
        currentKeyboard = TheCore.currentKeyboard;
        hotkeysFiles = TheCore.currentHotkeysFiles;
        loadHotkeys(((function() {
          var _results;
          _results = [];
          for (k in hotkeysFiles) {
            v = hotkeysFiles[k];
            _results.push(v);
          }
          return _results;
        })())[0]);
        $('.container').html(coffeecup.render(containerTemplate));
        $('select.keyboard-layout').val(currentKeyboard);
        $('.keyboard .inner').html(coffeecup.render(keyboardTemplate, {
          keyboard: keyboards[currentKeyboard],
          hardcode: {
            touch: touch,
            sizeClass: sizeClass,
            blankRow: blankRow,
            formatKeyCap: formatKeyCap
          }
        }));
        currentMods = [];
        currentGroup = [];
        currentUnit = null;
        TheCore.currentHotkeys = currentHotkeys = {};
        globalState = {
          currentUnit: null,
          controlGroup: (function() {
            var _i, _results;
            _results = [];
            for (i = _i = 0; _i <= 9; i = ++_i) {
              _results.push(null);
            }
            return _results;
          })()
        };
        sendMessage = function(text, kind) {
          var message;
          if (text) {
            message = $("<h3 class='" + kind + "'>" + text + "</h3>");
            $('.messages').append(message);
            setTimeout((function() {
              return message.addClass('hide');
            }), 0);
            return setTimeout((function() {
              return message.remove();
            }), 2000);
          }
        };
        Unit = (function() {
          function Unit(race, kind, name) {
            var command, inherited, key, path, _base, _i, _j, _len, _len1, _ref, _ref1, _ref2;
            this.race = race;
            this.kind = kind;
            this.name = name;
            this.icon = $(".unit-icon.unit-" + this.name);
            this.card = TheCore.raceCards[this.race][this.kind][this.name];
            this.commands = this.card.commands;
            console.log(this.commands);
            if (this.commands.inherit) {
              _ref = this.commands.inherit;
              for (_i = 0, _len = _ref.length; _i < _len; _i++) {
                path = _ref[_i];
                path = path.split('.');
                inherited = TheCore.commandCards;
                while (path.length) {
                  inherited = inherited[path.shift()];
                }
                for (k in inherited) {
                  v = inherited[k];
                  if ((_base = this.commands)[k] == null) {
                    _base[k] = v;
                  }
                }
              }
            }
            _ref1 = this.commands;
            for (name in _ref1) {
              command = _ref1[name];
              _ref2 = ['if', 'on'];
              for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
                key = _ref2[_j];
                if (typeof command[key] === 'string') {
                  command[key] = eval("(" + command[key] + ")");
                }
              }
            }
          }

          Unit.fromIcon = function($icon) {
            var kind, race, unit;
            race = (($icon.closest('.race-commands'))[0].className.match(/race-commands race-(\w+)/))[1];
            kind = (($icon.closest('.unit-commands'))[0].className.match(/unit-commands kind-(\w+)/))[1];
            unit = (($icon.closest('.unit-icon'))[0].className.match(/unit-icon unit-(\w+)/))[1];
            return new Unit(race, kind, unit);
          };

          Unit.prototype.globalState = globalState;

          return Unit;

        })();
        showMapsForUnit = function(unit) {
          var $map, $maps, command, key, keys, mod, mods, name, _ref, _results;
          _ref = unit.commands;
          _results = [];
          for (name in _ref) {
            command = _ref[name];
            if (typeof command["if"] === 'function') {
              if (!command["if"].call(unit)) {
              	console.log("skipping base 'if' result: "+name);
                continue;
              }
            }
            if (!(keys = currentHotkeys[command.hotkeyCode || name])) {
              console.log("skipping base bad key: "+name+" | "+command.hotkeyCode);
              continue;
            }
            _results.push((function() {
              var _i, _j, _len, _ref1, _results1;
              _results1 = [];
              for (_i = 0, _len = keys.length; _i < _len; _i++) {
                key = keys[_i];
                _ref1 = key.split('+'), mods = 2 <= _ref1.length ? __slice.call(_ref1, 0, _j = _ref1.length - 1) : (_j = 0, []), key = _ref1[_j++];
                if (mods && (__indexOf.call((function() {
                  var _k, _len1, _results2;
                  _results2 = [];
                  for (_k = 0, _len1 = currentMods.length; _k < _len1; _k++) {
                    mod = currentMods[_k];
                    _results2.push(__indexOf.call(mods, mod) >= 0);
                  }
                  return _results2;
                })(), false) >= 0 || __indexOf.call((function() {
                  var _k, _len1, _results2;
                  _results2 = [];
                  for (_k = 0, _len1 = mods.length; _k < _len1; _k++) {
                    mod = mods[_k];
                    _results2.push(__indexOf.call(currentMods, mod) >= 0);
                  }
                  return _results2;
                })(), false) >= 0)) {
                  continue;
                }
                $maps = $(".keyboard .key.key-" + (keyClass(key)) + " .maps");
                _results1.push($map = $maps.append("<div class='map map-command cmd-icon-style map-" + name + " command-" + (commandClass(name)) + "' style='background-image:url(\"icons/"+command.icon+"\");'>" + (command.displayText || name) + "</div>"));
              }
              return _results1;
            })());
          }
          return _results;
        };
        showGlobalMaps = function() {
          var $map, $maps, command, key, keys, m, mod, mods, name, unit, _ref, _results;
          _ref = TheCore.commandCards.global;
          _results = [];
          for (name in _ref) {
            command = _ref[name];
            if (command["if"]) {
              if (typeof command["if"] === 'string') {
                command["if"] = eval("(" + command["if"] + ")");
              }
              if (!command["if"].call(globalState)) {
                continue;
              }
            }
            if (!(keys = currentHotkeys[command.hotkeyCode || name])) {
              continue;
            }
            _results.push((function() {
              var _i, _j, _len, _ref1, _results1;
              _results1 = [];
              for (_i = 0, _len = keys.length; _i < _len; _i++) {
                key = keys[_i];
                _ref1 = key.split('+'), mods = 2 <= _ref1.length ? __slice.call(_ref1, 0, _j = _ref1.length - 1) : (_j = 0, []), key = _ref1[_j++];
                if (mods && (__indexOf.call((function() {
                  var _k, _len1, _results2;
                  _results2 = [];
                  for (_k = 0, _len1 = currentMods.length; _k < _len1; _k++) {
                    mod = currentMods[_k];
                    _results2.push(__indexOf.call(mods, mod) >= 0);
                  }
                  return _results2;
                })(), false) >= 0 || __indexOf.call((function() {
                  var _k, _len1, _results2;
                  _results2 = [];
                  for (_k = 0, _len1 = mods.length; _k < _len1; _k++) {
                    mod = mods[_k];
                    _results2.push(__indexOf.call(currentMods, mod) >= 0);
                  }
                  return _results2;
                })(), false) >= 0)) {
                  continue;
                }
                if (name.match(/^Observe|Leader|Toggle|Replay|Stats/)) {
                  continue;
                }
                $maps = $(".keyboard .key.key-" + (keyClass(key)) + " .maps");
                if ((m = name.match(/ControlGroup\w+(\d)/))) {
                  unit = globalState.controlGroup[m[1]];
                }
                _results1.push($map = $maps.append("<div class='map map-global cmd-icon-style map-" + name + " command-" + (commandClass(name)) + " " + (unit ? "unit-icon unit-" + unit.name : void 0) + "' style='background-image:url(\"icons/"+command.icon+"\");'>" + (command.keyCap || command.displayText || name) + "</div>"));
              }
              return _results1;
            })());
          }
          return _results;
        };
        clearMaps = function() {
          return $('.keyboard .map').remove();
        };
        selectedUnit = null;
        debounceTimer = null;
        $('.races-icons').on('click', '.race-icon', function() {
          var $icon, race;
          $icon = $(this);
          race = (this.className.match(/race-icon race-(\w+)/))[1];
          $.fn.cookie('race-selected', race, {
            expires: 30
          });
          $('.race-commands').addClass('hide');
          $('.races-icons .race-icon').removeClass('selected');
          $icon.addClass('selected');
          $(".race-commands.race-" + race).removeClass('hide');
          return $('.unit-icon.selected').click();
        });
        showCurrentUnitMaps = function() {
          clearMaps();
          if (currentUnit != null) {
            showMapsForUnit(currentUnit);
          }
          showGlobalMaps();
          if (debounceTimer) {
            clearTimeout(debounceTimer);
            return debounceTimer = null;
          }
        };
        $('.races-commands').on('click', '.unit-icon', function() {
          var $el;
          $el = $(this);
          globalState.select(Unit.fromIcon($el));
          return sendMessage("Select " + (currentUnit.displayText || currentUnit.name.replace(/([a-z])([A-Z])/g, '$1 $2')));
        });
        globalState.select = function(unit) {
          var $el;
          if (!unit) {
            return;
          }
          $el = unit.icon;
          $.fn.cookie('unit-selected', unit.name, {
            expires: 30
          });
          $('.races-commands .unit-icon.selected').removeClass('selected');
          $el.addClass('selected');
          this.currentUnit = currentUnit = unit;
          return showCurrentUnitMaps();
        };
        globalState.selectNew = function() {
          var args;
          args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
          return this.select((function(func, args, ctor) {
            ctor.prototype = func.prototype;
            var child = new ctor, result = func.apply(child, args);
            return Object(result) === result ? result : child;
          })(Unit, args, function(){}));
        };
        modKeyAttrs = {
          ctrlKey: 'Control',
          altKey: 'Alt',
          metaKey: 'Alt',
          shiftKey: 'Shift'
        };
        modKeys = (function() {
          var _results;
          _results = [];
          for (attr in modKeyAttrs) {
            key = modKeyAttrs[attr];
            _results.push(key);
          }
          return _results;
        })();
        highlightModKeys = function() {
          $(((function() {
            var _results;
            _results = [];
            for (attr in modKeyAttrs) {
              key = modKeyAttrs[attr];
              _results.push(".keyboard .key-" + key);
            }
            return _results;
          })()).join(',')).removeClass('selected');
          return $(((function() {
            var _i, _len, _results;
            _results = [];
            for (_i = 0, _len = currentMods.length; _i < _len; _i++) {
              key = currentMods[_i];
              _results.push(".keyboard .key-" + key);
            }
            return _results;
          })()).join(',')).addClass('selected');
        };
        keyPress = function(key) {
          var $key, command, m, map, _i, _len, _ref, _ref1;
          if (key === 'void') {
            return;
          }
          if (__indexOf.call(modKeys, key) >= 0) {
            if (__indexOf.call(currentMods, key) < 0) {
              currentMods.push(key);
              highlightModKeys();
              return showCurrentUnitMaps();
            }
          } else {
            $key = $(".keyboard .key-" + key).addClass('selected');
            _ref = $key.find('.map');
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              map = _ref[_i];
              if (m = map.className.match(/map-global map-(\w+)/)) {
                if ((_ref1 = m[1]) === 'Select' || _ref1 === 'Interact') {
                  return;
                }
                command = TheCore.commandCards.global[m[1]];
                if (command != null ? command.on : void 0) {
                  if (typeof command.on === 'string') {
                    command.on = eval("(" + command.on + ")");
                  }
                  command.on.call(globalState);
                }
                sendMessage(command.displayText || m[1].replace(/([a-z])([A-Z])/g, '$1 $2'));
              } else if (m = map.className.match(/map-command map-(\w+)/)) {
                command = currentUnit != null ? currentUnit.commands[m[1]] : void 0;
                if (command.on) {
                  command.on.call(currentUnit);
                }
                sendMessage(command.displayText || m[1].replace(/([a-z])([A-Z])/g, '$1 $2'));
                showCurrentUnitMaps();
              }
              break;
            }
          }
        };
        keyRelease = function(key) {
          if (key === 'void') {
            return;
          }
          if (__indexOf.call(modKeys, key) >= 0) {
            if (__indexOf.call(currentMods, key) >= 0) {
              currentMods.splice(currentMods.indexOf(key), 1);
              highlightModKeys();
              return showCurrentUnitMaps();
            }
          } else {
            return $(".keyboard .key-" + key).removeClass('selected');
          }
        };
        $(window).on('keydown keyup', windowHandler = function(e) {
          var keyFn, _ref;
          currentMods = (function() {
            var _results;
            _results = [];
            for (attr in modKeyAttrs) {
              key = modKeyAttrs[attr];
              if (e[attr]) {
                _results.push(key);
              }
            }
            return _results;
          })();
          console.log(key, e.keyCode, currentMods);
          highlightModKeys();
          key = keyClass((_ref = keyCodeMaps[currentKeyboard][e.keyCode]) != null ? _ref.toUpperCase() : void 0);
          keyFn = (function() {
            switch (e.type) {
              case 'keydown':
                return keyPress;
              case 'keyup':
                return keyRelease;
            }
          })();
          if (key.match(/^\w+$/)) {
            keyFn(key);
          }
          e.preventDefault();
          return showCurrentUnitMaps();
        });
        $('.keyboard').on('mousedown', '.key', function(e) {
          var $key;
          $key = $(this);
          key = this.className.match(/key key-(\w+)/)[1];
          return keyPress(key);
        });
        $('.keyboard').on('mouseup', '.key', function(e) {
          var $key;
          $key = $(this);
          key = this.className.match(/key key-(\w+)/)[1];
          return keyRelease(key);
        });
        mouseButtons = (function() {
          var _i, _len, _ref, _results;
          _ref = [null, 'Left', 'Middle', 'Right', 'Forward', 'Back'];
          _results = [];
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            which = _ref[_i];
            _results.push("" + which + "MouseButton");
          }
          return _results;
        })();
        $('body').on('contextmenu', function(e) {
          if (!(currentMods.length > 0)) {
            return false;
          }
        });
        $('body').on('mousedown', function(e) {
          key = mouseButtons[e.which];
          return keyPress(key);
        });
        $('body').on('mouseup', function(e) {
          key = mouseButtons[e.which];
          return keyRelease(key);
        });
        $('select.display-side').change(function() {
          var side;
          $('.keyboard').removeClass(((function() {
            var _i, _len, _ref, _results;
            _ref = ['left', 'right', 'full'];
            _results = [];
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              side = _ref[_i];
              _results.push("display-" + side);
            }
            return _results;
          })()).join(' '));
          $('.keyboard').addClass("display-" + ($(this).val()));
          return $.fn.cookie('display-side-val', $(this).val(), {
            expires: 30
          });
        });
        $('select.hotkey-file').change(function() {
          var filename, race, _ref;
          filename = $(this).val();
          TheCore.currentHotkeys = currentHotkeys = loadHotkeys(hotkeysFiles[filename]);
          $.fn.cookie('hotkey-file-val', filename, {
            expires: 30
          });
          if (filename.match(/Left/)) {
            $('select.display-side').val('left').change();
          } else if (filename.match(/Right/)) {
            $('select.display-side').val('right').change();
          } else {
            $('select.display-side').val('full').change();
          }
          if ((race = (_ref = filename.match(/(Zerg|Protoss|Terran)/)) != null ? _ref[1] : void 0)) {
            $(".race-icon.race-" + race).click();
          } else if (filename.match(/Random/)) {
            race = 'Zerg Protoss Terran'.split(' ')[Math.floor(Math.random() * 3)];
            $(".race-icon.race-" + race).click();
          }
          return showCurrentUnitMaps();
        });
        $('select.keyboard-layout').change(function() {
          currentKeyboard = $(this).val();
          $.fn.cookie('keyboard-layout-val', currentKeyboard, {
            expires: 30
          });
          $(window).unbind(windowHandler);
          return TheCore.loadTheCoreForKeyboard(currentKeyboard);
        });
        $('select.display-side').val($.fn.cookie('display-side-val') || $('select.display-side option')[0].value).change();
        hotkeysFile = (val = $.fn.cookie('hotkey-file-val')) ? hotkeysFiles[val] ? val : ($.fn.cookie('tutorial-dismiss', false), $('select.hotkey-file option')[0].value) : $('select.hotkey-file option')[0].value;
        $('select.hotkey-file').val(hotkeysFile).change();
        showCurrentUnitMaps();
        $(".race-icon.race-" + ($.fn.cookie('race-selected') || 'Terran')).click();
        $(".unit-icon.unit-" + ($.fn.cookie('unit-selected') || 'SCV')).click();
        $('.tutorial-overlay').on('click', function() {
          $('.tutorial-overlay,.tutorial').hide();
          return $.fn.cookie('tutorial-dismiss', true, {
            expires: 30
          });
        });
        if ($.fn.cookie('tutorial-dismiss') && $.fn.cookie('tutorial-dismiss') !== 'false') {
          return $('.tutorial-overlay').click();
        }
      };
    }).call(this);</script></body></html>